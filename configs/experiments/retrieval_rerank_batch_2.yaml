---
run_id: retrieval_rerank_batch_2
description: >
  Node 1 performs embedding, FAISS search, document fetch, and reranking.
  Node 2 handles only LLM + sentiment + toxicity.
  Batch Size 2.

nodes:
  - number: 0
    profile: configs/baseline_gateway.yaml
    env:
      GATEWAY_BATCH_SIZE: 2
      GATEWAY_BATCH_TIMEOUT_MS: 100
      ENABLE_ADAPTIVE_BATCHING: false
  - number: 1
    profile: configs/retriever_with_rerank.yaml
    env:
      RETRIEVAL_BATCH_SIZE: 2
  - number: 2
    profile: configs/generation_no_rerank.yaml
    env:
      GENERATION_BATCH_SIZE: 2

workload:
  requests: 80
  concurrency: 1
  rate_limit: 0.25
  timeout: 300

notes: |-
  Testing if lower batch size improves throughput for the best performing
  config.
