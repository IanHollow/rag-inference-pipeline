---
run_id: gateway_postproc_experiment
description: >
  Gateway handles Embedding + Post-processing (Sentiment, Toxicity).
  Node 1 handles Retrieval + Reranking.
  Node 2 handles LLM only.

nodes:
  - number: 0
    profile: configs/gateway_postproc.yaml
    env:
      GATEWAY_BATCH_SIZE: 6
      GATEWAY_BATCH_TIMEOUT_MS: 100
  - number: 1
    profile: configs/retrieval_rerank_no_embedding.yaml
    env:
      RETRIEVAL_BATCH_SIZE: 10
  - number: 2
    profile: configs/generation_llm_only.yaml
    env:
      GENERATION_BATCH_SIZE: 6

workload:
  requests: 100
  concurrency: 2
  rate_limit: 0.1
  timeout: 300

notes: |-
  Testing hypothesis: Stripping non-LLM tasks from Node 2 extends throughput.
