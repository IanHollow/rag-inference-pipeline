---
run_id: node2_fetch_rerank
description: >
  Node 1 performs Embedding + FAISS only (returns Doc IDs).
  Node 2 performs Doc Fetch, Rerank, LLM, Sentiment, Toxicity.
  Goal: Reduce Node 1 memory pressure and network payload size.

nodes:
  - number: 0
    profile: configs/baseline_gateway.yaml
    env:
      GATEWAY_BATCH_SIZE: 4
      GATEWAY_BATCH_TIMEOUT_MS: 100
  - number: 1
    profile: configs/retrieval_embedder_faiss_ids.yaml
    env:
      RETRIEVAL_BATCH_SIZE: 4
  - number: 2
    profile: configs/generation_fetch_rerank_full.yaml
    env:
      GENERATION_BATCH_SIZE: 4

workload:
  requests: 100
  concurrency: 4
  rate_limit: 0.1
  timeout: 300

notes: |-
  Testing if offloading Doc Fetch and Rerank to Node 2 helps balance memory
  usage and reduces network traffic (Doc IDs vs Full Docs).
