---
run_id: max_throughput_test
description: >
  Stress test to determine maximum throughput by saturating the system with
  high concurrency requests.

nodes:
  - number: 0
    profile: configs/baseline_gateway.yaml
    env:
      GATEWAY_BATCH_SIZE: 32
      GATEWAY_BATCH_TIMEOUT_MS: 200
      ENABLE_ADAPTIVE_BATCHING: false
  - number: 1
    profile: configs/retriever_with_rerank.yaml
    env:
      RETRIEVAL_BATCH_SIZE: 32
  - number: 2
    profile: configs/generation_no_rerank.yaml
    env:
      GENERATION_BATCH_SIZE: 32

workload:
  requests: 200
  concurrency: 50
  rate_limit: 0.0
  timeout: 600

notes: |-
  High concurrency test to saturate the pipeline and measure max throughput.
