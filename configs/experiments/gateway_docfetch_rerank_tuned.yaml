---
run_id: gateway_docfetch_rerank_tuned
description: >
  Tuned version of gateway_docfetch_rerank with larger gateway+retrieval batch
  sizes to see if lighter Node 1 payloads can push throughput past 44 req/min.

nodes:
  - number: 0
    profile: configs/gateway_docfetch_rerank_postproc.yaml
    env:
      GATEWAY_BATCH_SIZE: 6
      GATEWAY_BATCH_TIMEOUT_MS: 110
  - number: 1
    profile: configs/retrieval_embedder_faiss_ids.yaml
    env:
      RETRIEVAL_BATCH_SIZE: 12
  - number: 2
    profile: configs/generation_llm_only.yaml
    env:
      GENERATION_BATCH_SIZE: 6

workload:
  requests: 180
  concurrency: 3
  rate_limit: 0.05
  timeout: 300

notes: |-
  Builds on the earlier docfetch experiment that hit ~42 req/min but with lower
  tail latency. These settings probe whether the topology still holds up with
  heavier batching at the gateway and FAISS nodes.
