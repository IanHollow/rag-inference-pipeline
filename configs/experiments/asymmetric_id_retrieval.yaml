---
run_id: asymmetric_id_retrieval
description: >
  ID-only retrieval allows Node 1 to batch aggressively while Node 0 absorbs
  sentiment/toxicity and Node 2 performs doc fetch + rerank + LLM. Measures
  whether asymmetric batching yields higher throughput without blowing up tail
  latency.

nodes:
  - number: 0
    profile: configs/gateway_postproc.yaml
    env:
      GATEWAY_BATCH_SIZE: 6
      GATEWAY_BATCH_TIMEOUT_MS: 90
  - number: 1
    profile: configs/retrieval_embedder_faiss_ids.yaml
    env:
      RETRIEVAL_BATCH_SIZE: 24
  - number: 2
    profile: configs/generation_fetch_rerank.yaml
    env:
      GENERATION_BATCH_SIZE: 8

workload:
  requests: 180
  concurrency: 2
  rate_limit: 0.05
  timeout: 300

notes: |-
  Builds on rerank_upstream and gateway_postproc experiment data.
  Goal: exploit lighter Node 1 responses (IDs only) to increase FAISS batching
  while keeping the gatewayâ€™s post-processing pipeline busy.
