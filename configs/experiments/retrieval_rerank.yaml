---
run_id: retrieval_with_rerank
description: >
  Node 1 performs embedding, FAISS search, document fetch, and reranking so Node
  2 handles only LLM + sentiment + toxicity. Measures whether upstream reranking
  improves throughput by shrinking generation workloads.

nodes:
  - number: 0
    profile: configs/baseline_gateway.yaml
  - number: 1
    profile: configs/retriever_with_rerank.yaml
  - number: 2
    profile: configs/generation_no_rerank.yaml

workload:
  requests: 256
  concurrency: 128
  timeout: 300

notes: |-
  Capture stage-level metrics to confirm rerank CPU shifts from Node 2 to Node
  1. Compare throughput against the baseline to decide if this composition is
  worth the added Node 1 load.
