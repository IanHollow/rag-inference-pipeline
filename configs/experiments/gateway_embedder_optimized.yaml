---
run_id: gateway_embedder_optimized
description: >
  Gateway Embedder optimization with memory savings on Node 1.
  Node 0: Gateway + Embedder
  Node 1: FAISS + Docs (No Embedder)
  Node 2: Reranker + LLM + Sentiment + Toxicity

nodes:
  - number: 0
    profile: configs/gateway_with_embedding.yaml
    env:
      GATEWAY_BATCH_SIZE: 8
      GATEWAY_BATCH_TIMEOUT_MS: 100
      ENABLE_ADAPTIVE_BATCHING: true
  - number: 1
    profile: configs/retrieval_only.yaml
    env:
      RETRIEVAL_BATCH_SIZE: 8
  - number: 2
    profile: configs/generation.yaml
    env:
      GENERATION_BATCH_SIZE: 8

workload:
  requests: 100
  concurrency: 4
  rate_limit: 0.1
  timeout: 300

notes: |-
  Same as gateway_embedder but removes unused Embedder from Node 1 to save
  memory.
