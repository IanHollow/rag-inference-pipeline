# Production/Cluster Environment Configuration
# =============================================
# Use this file when running on the target 3-node cluster.
# Copy to .env or source before running: export $(cat .env.prod | xargs)
#
# Target environment:
#   - 3 separate nodes (dedicated machines)
#   - CPU: Intel Xeon Gold 6242 @ 2.80GHz (~16 cores)
#   - 16 GB RAM per node
#   - GPU: NVIDIA Tesla T4, 15 GB VRAM (optional)

# === Disable Local Development Mode ===
LOCAL_DEV_MODE=false

# === CPU Thread Configuration ===
# Each node has full access to ~16 cores
CPU_INFERENCE_THREADS=16
FAISS_THREADS=16
CPU_WORKER_THREADS=16

# === Memory Configuration ===
# Each node has 16GB RAM - load FAISS fully into memory for speed
FAISS_USE_MMAP=false

# === Batching Configuration ===
# Larger batch sizes for better throughput on dedicated nodes
GATEWAY_BATCH_SIZE=8
RETRIEVAL_BATCH_SIZE=8
GENERATION_BATCH_SIZE=4

# === Cache Configuration ===
# Larger caches since each node has 16GB RAM
GATEWAY_CACHE_CAPACITY=2000
RETRIEVAL_CACHE_CAPACITY=2000
DOCUMENT_CACHE_CAPACITY=10000

# === Payload Mode ===
# Use ID-only mode to minimize network transfer between nodes
DOCUMENTS_PAYLOAD_MODE=id_only

# === Compression ===
# LZ4 for fast compression - good balance for cross-node communication
PIPELINE_RPC_COMPRESSION=lz4

# === GPU Configuration (if available) ===
# Set to false to enable GPU acceleration
# ONLY_CPU=false
